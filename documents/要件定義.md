1. はじめに
1.1. 目的
本要件定義書は、ガールズバーにおける顧客向けQRコード注文システム及び、店舗スタッフ向け管理システム開発の要件を明確にすることを目的とします。

1.2. 対象読者
本要件定義書は、以下の関係者を対象とします。

システム開発者

ガールズバー経営者

ガールズバー店舗管理者

ガールズバー従業員

1.3. 用語の定義
用語	説明
店舗	ガールズバーの店舗 (小規模〜中規模を想定)
代表者	店舗のオーナー。システム開発者が初回設定を行う
管理者	店舗の運営責任者。代表者がシステム上で登録を行う
店員	ガールズバーで働く従業員 (5-10名程度を想定)
顧客	ガールズバーに来店する客
メニュー	店舗で提供するドリンク、フードの品書き (ドリンクメイン、軽食程度)
QRコード	顧客がテーブルで読み取る注文用二次元コード
管理画面	店舗の代表者、管理者が利用する管理システム
スマレジ	株式会社スマレジが提供するPOSシステム
2. システム概要
2.1. システム名
ガールズバー向けQRコード注文システム

2.2. システムの目的
顧客の注文体験向上

注文業務効率化による店員の負担軽減

売上管理の効率化

店員のドリンク管理の正確性向上

2.3. システムの全体像
本システムは、顧客向けWebアプリケーション、店舗スタッフ向け管理Webアプリケーション、及びインフラ環境で構成されます。

顧客向けWebアプリケーション

顧客が自身のスマートフォンでQRコードを読み取り、メニュー閲覧、注文を行います。

店舗スタッフ向け管理Webアプリケーション

代表者、管理者がメニュー管理、QRコード管理、売上管理、店員管理などを行います。

インフラ環境

上記Webアプリケーションを稼働させるためのサーバー、ネットワーク環境です。

3. 機能要件
3.1. 顧客向け機能
3.1.1. QRコード読み取り機能
顧客はテーブルに設置されたQRコードをスマートフォンのカメラで読み取ります。

QRコードを読み取ることで、店舗のメニュー画面へアクセスできます。

3.1.2. メニュー表示機能
店舗のメニューをスマートフォン画面に表示します。

メニューは管理者が設定したカテゴリ分けで表示されることが望ましいです。

各メニュー項目には、以下の情報が表示される必要があります。

品名

価格

説明 (任意)

写真 (任意)

3.1.3. 注文機能
顧客はメニューから注文したい商品を選択し、数量を指定して注文できます。

顧客自身が飲むドリンクと、店員に奢るドリンクを区別して注文できます。

店員に奢るドリンクを注文する場合は、対象の店員を選択できる必要があります。（店員一覧から選択、または店員ID入力などを想定）

注文内容の確認画面が表示され、確定前に内容を確認できます。

注文確定後、注文完了画面が表示されます。

3.1.4. 注文履歴表示機能 (オプション)
顧客が自身の注文履歴を確認できる機能 (実装は必須ではない)

3.2. 管理者向け機能 (管理画面)
3.2.1. ログイン機能
管理画面へは、店舗コード、ID、パスワードでログインします。

ログインIDの種類

代表者

管理者

3.2.2. メニュー管理機能
メニューの登録、編集、削除ができます。

メニューカテゴリは管理者が自由に設定できるようにします。

メニューカテゴリの登録、編集、削除ができます。

メニュー項目には、以下の情報を登録・編集できます。

品名

価格

説明 (任意)

写真 (任意)

カテゴリ

3.2.3. QRコード管理機能
テーブルに設置するQRコードを発行できます。

発行したQRコードをダウンロードできます。（印刷してテーブルに設置するため）

QRコードとテーブル番号を紐付けることが望ましい。(どのテーブルからの注文か管理画面で把握できるようにするため)

3.2.4. 売上管理機能
日別売上: 日ごとの売上金額、件数を必ず確認できるようにします。

月別売上: 月ごとの売上金額、件数を必ず確認できるようにします。

期間指定売上: 任意の期間の売上金額、件数を確認できます。

メニュー別の売上数量、金額を確認できます。

時間帯別の売上傾向を把握できることが望ましい。（時間帯別売上グラフなど）

売上データをCSV形式でダウンロードできることが望ましい。

売上データは最低1年間保存することが望ましい。

3.2.5. 店員管理機能
店員の登録、編集、削除ができます。

店員情報として、以下の項目を登録・編集できることが望ましい。

店員ID (システムで自動採番 or 管理者が設定)

名前

出勤状況 (手動で出勤/退勤を記録、または自動で記録する仕組みが必要か要検討)

3.2.6. 店員ドリンク管理機能
店員が飲んだドリンクの履歴を確認できます。

誰が、いつ、どのドリンクを飲んだか (顧客からの奢りのみ)

日別店員ドリンク集計: 日ごとの店員別奢りドリンク数を必ず集計できるようにします。

月別店員ドリンク集計: 月ごとの店員別奢りドリンク数を必ず集計できるようにします。

3.2.7. ユーザー管理機能
代表者

初回システム利用時に、システム開発者が代表者のアカウントを設定します。

代表者は、自身のパスワードを変更できます。

管理者

代表者は、管理者アカウントを登録、編集、削除できます。

管理者アカウントには、店舗コードを紐付けます。

3.2.8. 店舗情報管理機能
店舗名、店舗コードなどの店舗情報を登録・編集できます。

サービス料、チャージ料 の設定ができるようにします。(名称、金額など詳細項目は別途検討)

4. 非機能要件
4.1. 性能要件
応答性能: 顧客向け、管理者向け画面ともに、操作に対して2秒以内に応答を返すこと。（より快適な顧客体験のため、目標値を引き上げ）

同時接続数: ピーク時でも、20テーブル程度の同時アクセスに耐えられること。（店舗規模から想定）

処理能力: 売上集計など、データ処理を迅速に行えること。

4.2. 可用性要件
稼働時間: 24時間365日稼働を目標とする。

障害発生時の対応: 障害発生時には1時間以内の復旧を目標とする。

4.3. セキュリティ要件
最重要: 売上情報保護を最重要とする。

ログイン認証: 管理画面へのログインは、店舗コード、ID、パスワードによる認証を行うこと。

パスワード管理: パスワードはソルト (salt) を用いて暗号化し、データベースに保存すること。

不正アクセス対策:

WAF (ウェブアプリケーションファイアウォール) の導入を検討し、SQLインジェクション、クロスサイトスクリプティングなどの攻撃から防御する。

ブルートフォースアタック対策: ログイン試行回数制限を設ける。

個人情報保護: 個人情報（店員情報など）は適切に管理し、漏洩対策を行うこと。

データ暗号化:

通信経路はHTTPS で暗号化する (SSL証明書必須)。

データベースに保存する売上データ、個人情報などの重要データは暗号化することが望ましい。

アクセス制御: データベースへのアクセスは、必要最小限の権限を持つアカウントのみに許可する。

4.4. 運用・保守性要件
運用容易性: システムの運用が容易であること。

保守容易性: システムの保守、アップデートが容易であること。

監視体制: システムの稼働状況を監視できる仕組みを導入することが望ましい。（クラウドサービスの監視機能を活用）

4.5. ユーザビリティ要件
顧客向け画面: スマートフォンでの操作性を考慮し、直感的で分かりやすい画面設計とする。

管理者向け画面: PCでの操作性を考慮し、効率的に業務を行える画面設計とする。

アクセシビリティ: 可能な範囲でアクセシビリティに配慮した設計とする。

5. インフラ要件
5.1. サーバー構成
ウェブサーバー: 顧客向けWebアプリケーション、管理者向けWebアプリケーションを稼働させるサーバー (Vercel を想定)

データベースサーバー: メニュー情報、注文情報、売上情報、ユーザー情報などを格納するデータベースサーバー (Supabase を想定)

必要に応じてロードバランサー、キャッシュサーバー などを導入 (Supabase, Vercel の提供機能で十分な可能性あり)

5.2. ネットワーク構成
インターネット回線

社内ネットワーク (店舗内LAN)

Wi-Fi環境 (顧客向け、店舗スタッフ向け)

5.3. 開発環境・本番環境
開発環境、テスト環境、本番環境を分離して構築することが望ましい。(Vercel, Supabase の環境分離機能を利用)

5.4. クラウド環境
クラウド環境: Supabase + Vercel を 主要な候補とする。

運用保守の容易性、拡張性、開発効率の高さが期待できる。

AWS, GCP, Azure も引き続き選択肢として検討可能。

オンプレミス環境: 今回は検討しない。

5.5. その他
SSL証明書: 必須 (Vercel, Supabase の機能で自動設定可能)

バックアップ体制: データベースの自動バックアップを 必須で行う (Supabase の機能を利用)。 定期的なバックアップデータのリストアテストも実施することが望ましい。

監視体制: サーバー、アプリケーションの監視を行う (Vercel, Supabase の監視機能、または外部監視サービスを利用)。

6. セキュリティ要件詳細
認証認可:

管理画面へのアクセス制御（ロールベースアクセス制御）：代表者、管理者で権限を分ける。

不正ログイン対策:

ブルートフォースアタック対策: ログイン試行回数制限、CAPTCHA導入などを検討。

多要素認証: より高度なセキュリティレベルが必要な場合は検討。

データ保護:

売上データ、個人情報などの重要データの暗号化 (保存時、通信時): データベース層での暗号化、アプリケーション層での暗号化を検討。

データベースへのアクセス制御: 厳格なアクセス制御を行う。

定期的なバックアップ: 自動バックアップ設定 必須, 定期的なリストアテストも行うことが望ましい。

脆弱性対策:

セキュリティ脆弱性診断の実施 (開発時、運用開始後 定期的に): 専門業者への依頼も検討。

脆弱性対策ツールの導入 (WAF): Vercel で WAF が利用可能か確認。必要であれば外部 WAF サービスも検討。

セキュリティアップデートの適用: OS, ミドルウェア、ライブラリ等のセキュリティアップデートを迅速に適用する体制を構築。

7. スマレジ連携
連携目的: 会計処理の効率化、売上データの一元管理

連携方法: スマレジAPI連携

連携タイミング: 会計時 (顧客の退店時、または определенный 時間間隔ごと)

連携データ:

注文情報 (注文日時、テーブル番号、注文商品、数量、金額、顧客が奢った店員情報など)

売上情報 (売上金額、割引額、サービス料、チャージ料、決済方法など)

その他:

スマレジAPIの仕様、利用条件、費用などを調査し、連携方式を詳細設計する必要があります。

エラー発生時の処理 (リトライ処理、エラーログ出力など) を検討する必要があります。